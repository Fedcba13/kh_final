<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="foodOrder">
	<insert id="insertMarketOrder">
		insert into market_order
		values('mreq'||LPAD(seq_market_order_no.nextval, 5, '0'), #{marketNo}, default, #{marketOrderPrice})
	</insert>
	
	<insert id="insertMarketOrderDetail">
		insert into market_order_detail
		values('mdet'||LPAD(seq_market_order_detail_no.nextval, 5, '0'), 
		'mreq'||LPAD(seq_market_order_no.currval, 5, '0'),
		#{foodNo}, #{marketOrderDetailAmount}, 0, #{foodCompany})
	</insert>
	
	<delete id="deleteMarketCart">
		delete from cart
		where member_id=#{memberId} and flag=2 and food_no=#{foodNo}
	</delete>
</mapper>